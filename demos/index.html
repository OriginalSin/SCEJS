<html>
	<head>
		<title>SCEJS Draft</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<script src="../SCEJS/SCE.class.js"></script> 
		
		<script src="../SCEJS/Prefabs/SimpleCamera/SimpleCamera.class.js"></script>
		
		<script src="../SCEJS/Prefabs/SimpleNode/SimpleNode.class.js"></script>
		
		<script src="../SCEJS/Prefabs/Graph/KERNEL_DIR.class.js"></script>
		<script src="../SCEJS/Prefabs/Graph/KERNEL_POS_OPPOSITE.class.js"></script>
		<script src="../SCEJS/Prefabs/Graph/KERNEL_POSBYDIR.class.js"></script>
		<script src="../SCEJS/Prefabs/Graph/VFP_NODEPICKDRAG.class.js"></script>
		<script src="../SCEJS/Prefabs/Graph/VFP_NODE.class.js"></script>
		<script src="../SCEJS/Prefabs/Graph/Graph.class.js"></script>
		
		<script src="../SCEJS/Prefabs/Grid/VFP_GRID.class.js"></script>
		<script src="../SCEJS/Prefabs/Grid/Grid.class.js"></script>
	</head>
	
	<body>
		
		<div id="SCEJS"></div> 
		<script>
			var sce = new SCE();
			sce.initialize({"target": document.getElementById("SCEJS"),
							"dimensions": {"width": 512, "height": 512}});
			
			
			var project = new Project();	
			sce.loadProject(project);
			
			var stage = new Stage();			
			project.addStage(stage);
			project.setActiveStage(stage);
			
			// CAMERA
			var simpleCamera = new SimpleCamera(sce);
						
			// NODE
			//var simpleNode = new SimpleNode(sce); 
			//simpleNode.setImage("../demos/_RESOURCES/cartman08.jpg");
			
			// GRID
			var grid = new Grid(sce);
			grid.generate(100.0, 1.0);
			
			// GRAPH
			var edgeColor_origin = [(255.0/255.0), (0.0/255.0), (0.0/255.0)];
			var edgeColor_target = [(0.0/255.0), (255.0/255.0), (0.0/255.0)];
			var OFFSET = 1000.0;
			var numNodes = 2000; 
			var numLinks = 100;
			var graph = new Graph(sce);			
			graph.setOffset(OFFSET);
			
			for(var n=0; n < numNodes; n++) {				
				var offs = OFFSET/10;
						
				var node = graph.addNode({
					"name": "#"+n.toString()+":"+n.toString(),
					"data": "#"+n.toString()+":"+n.toString(),
					"position": $V3([-(offs/2)+(Math.random()*offs), -(offs/2)+(Math.random()*offs), -(offs/2)+(Math.random()*offs)]),
					"color": ((n % 2) ? "../SCEJS/Prefabs/Graph/lena.jpg" : "../SCEJS/Prefabs/Graph/cartman08.jpg"),
					"onmouseup": (function(nodeData) {
						
				}).bind(this)});
			}
			graph.updateNodes();
			
			for(var n=0; n < numLinks; n++) {
				var A = parseInt(Math.random()*numNodes).toString();
				var B = parseInt(Math.random()*numNodes).toString();
				
				graph.addLink({	"origin": "#"+A+":"+A,
								"target": "#"+B+":"+B,
								"origin_color": edgeColor_origin,
								"target_color": edgeColor_target,
								"directed": true});
			}
			graph.updateLinks();	
			
			graph.setFontsImage("../SCEJS/Prefabs/Graph/fonts.png");  
			/*graph.set_destinationWidthHeight({width:16,
												height:16,
												spacing:2.0});*/
			//graph.set_dir("random");
			graph.setSelfShadows(false);
			
			//*********
			// RENDER STAGE
			//*********
			project.getActiveStage().render();
			
			
			window.onresize = (function() {
				//sce.setDimensions(512, 128);
		    }).bind(this);
		</script>
	</body>
</html>
