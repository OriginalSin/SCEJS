<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>SCEJS API DOC Source: Component_GPU.class.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	
	<link type="text/css" rel="stylesheet" href="styles/site.webclgl.css">
	
</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">SCEJS API DOC</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="ArrayGenerator.html">ArrayGenerator</a>
						</li>
						
						<li>
							<a href="Component.html">Component</a>
						</li>
						
						<li>
							<a href="Component_GPU.html">Component_GPU</a>
						</li>
						
						<li>
							<a href="ComponentControllerTransformTarget.html">ComponentControllerTransformTarget</a>
						</li>
						
						<li>
							<a href="ComponentKeyboardEvents.html">ComponentKeyboardEvents</a>
						</li>
						
						<li>
							<a href="ComponentMouseEvents.html">ComponentMouseEvents</a>
						</li>
						
						<li>
							<a href="ComponentProjection.html">ComponentProjection</a>
						</li>
						
						<li>
							<a href="ComponentRenderer.html">ComponentRenderer</a>
						</li>
						
						<li>
							<a href="ComponentScreenEffects.html">ComponentScreenEffects</a>
						</li>
						
						<li>
							<a href="ComponentTransform.html">ComponentTransform</a>
						</li>
						
						<li>
							<a href="ComponentTransformTarget.html">ComponentTransformTarget</a>
						</li>
						
						<li>
							<a href="gpufor.html">gpufor</a>
						</li>
						
						<li>
							<a href="Graph.html">Graph</a>
						</li>
						
						<li>
							<a href="Mesh.html">Mesh</a>
						</li>
						
						<li>
							<a href="Node.html">Node</a>
						</li>
						
						<li>
							<a href="Project.html">Project</a>
						</li>
						
						<li>
							<a href="SCE.html">SCE</a>
						</li>
						
						<li>
							<a href="SimpleCamera.html">SimpleCamera</a>
						</li>
						
						<li>
							<a href="Stage.html">Stage</a>
						</li>
						
						<li>
							<a href="StormM16.html">StormM16</a>
						</li>
						
						<li>
							<a href="StormV3.html">StormV3</a>
						</li>
						
						<li>
							<a href="SystemEvents.html">SystemEvents</a>
						</li>
						
						<li>
							<a href="Utils.html">Utils</a>
						</li>
						
						<li>
							<a href="WebCLGL.html">WebCLGL</a>
						</li>
						
						<li>
							<a href="WebCLGLBuffer.html">WebCLGLBuffer</a>
						</li>
						
						<li>
							<a href="WebCLGLBufferItem.html">WebCLGLBufferItem</a>
						</li>
						
						<li>
							<a href="WebCLGLKernel.html">WebCLGLKernel</a>
						</li>
						
						<li>
							<a href="WebCLGLUtils.html">WebCLGLUtils</a>
						</li>
						
						<li>
							<a href="WebCLGLVertexFragmentProgram.html">WebCLGLVertexFragmentProgram</a>
						</li>
						
						<li>
							<a href="WebCLGLWork.html">WebCLGLWork</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#$M16">$M16</a>
						</li>
						
						<li>
							<a href="global.html#$V3">$V3</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: Component_GPU.class.js</h1>
    
    <section>
        <article>
            <pre class="sunlight-highlight-javascript linenums">/**
 * @class
 * @constructor
 */
Component_GPU = function() {
    "use strict";

    this.gpufG = null;
    this.args = {};

    var _enableKernel = true;
    var _drawMode = 4;
    var _enableDepthTest = true;
    var _enableBlend = false;
    var _blendEquation = Constants.BLENDING_EQUATION_TYPES.FUNC_ADD;
    var _blendSrc = Constants.BLENDING_MODES.ONE;
    var _blendDst = Constants.BLENDING_MODES.ZERO;

    /**
     * setGPUFor
     */
    this.setGPUFor = function() {
        for(var key in arguments[1]) {
            var expl = key.split(" ");
            if(expl != null &amp;&amp; expl.length > 1) {
                var argName = expl[1];
                this.args[argName] = {
                	"fnvalue": arguments[1][key],
                    "updatable": null,
                    "splits": null,
                    "overrideDimensions": null};
            }
            arguments[1][key] = arguments[1][key]();
        }

        var F = (function(args) {
            return gpufor.apply(this, args);
        }).bind(this, arguments);
        this.gpufG = new F();
    };

    /**
     * getWork
     * @returns {WebCLGLWork}
     */
    this.getWork = function() {
        return this.gpufG.getWork();
    };

    /**
     * getWebCLGL
     * @returns {WebCLGL}
     */
    this.getWebCLGL = function() {
        return this.gpufG.getWebCLGL();
    };


    //██╗  ██╗███████╗██████╗ ███╗   ██╗███████╗██╗     ███████╗
    //██║ ██╔╝██╔════╝██╔══██╗████╗  ██║██╔════╝██║     ██╔════╝
    //█████╔╝ █████╗  ██████╔╝██╔██╗ ██║█████╗  ██║     ███████╗
    //██╔═██╗ ██╔══╝  ██╔══██╗██║╚██╗██║██╔══╝  ██║     ╚════██║
    //██║  ██╗███████╗██║  ██║██║ ╚████║███████╗███████╗███████║
    //╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚══════╝╚══════╝

    /**
     * enableKernel
     * @param {Int} [kernelNum=0]
     */
    this.enableKernel = function(kernelNum) {
        this.gpufG.enableKernel(kernelNum);
    };

    /**
     * disableKernel
     * @param {Int} [kernelNum=0]
     */
    this.disableKernel = function(kernelNum) {
        this.gpufG.disableKernel(kernelNum);
    };

    /**
     * onPreProcessKernels
     * @param {Int} [kernelNum=0]
     * @param {Callback} fn
     */
    this.onPreProcessKernels = function(kernelNum, fn) {
        this.gpufG.onPreProcessKernel(kernelNum, fn);
    };

    /**
     * onPostProcessKernels
     * @param {Int} [kernelNum=0]
     * @param {Callback} fn
     */
    this.onPostProcessKernels = function(kernelNum, fn) {
        this.gpufG.onPostProcessKernel(kernelNum, fn);
    };

    /**
     * tickKernels
     * @param {Bool} [isScreenEffects=false]
     * @private
     */
    this.processKernels = function(isScreenEffects) {
        if(this.gpufG != null &amp;&amp; _enableKernel == true) {
            this.gl.enable(this.gl.DEPTH_TEST);

            this.gpufG.processKernels();
        }
    };


    // ██████╗ ██████╗  █████╗ ██████╗ ██╗  ██╗██╗ ██████╗███████╗
    //██╔════╝ ██╔══██╗██╔══██╗██╔══██╗██║  ██║██║██╔════╝██╔════╝
    //██║  ███╗██████╔╝███████║██████╔╝███████║██║██║     ███████╗
    //██║   ██║██╔══██╗██╔══██║██╔═══╝ ██╔══██║██║██║     ╚════██║
    //╚██████╔╝██║  ██║██║  ██║██║     ██║  ██║██║╚██████╗███████║
    // ╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═╝╚═╝     ╚═╝  ╚═╝╚═╝ ╚═════╝╚══════╝

    /**
     * enableGraphic
     * @param {Int} [graphicNum=0]
     */
    this.enableGraphic = function(graphicNum) {
        this.gpufG.enableGraphic(graphicNum);
    };

    /**
     * disableGraphic
     * @param {Int} [graphicNum=0]
     */
    this.disableGraphic = function(graphicNum) {
        this.gpufG.disableGraphic(graphicNum);
    };

    /**
     * setGraphicDrawMode
     * @param {Constants.DRAW_MODES} draw
     */
    this.setGraphicDrawMode = function(draw) {
        _drawMode = draw;
    };

    /**
     * setGraphicEnableDepthTest
     * @param {Bool} enable
     */
    this.setGraphicEnableDepthTest = function(enable) {
        _enableDepthTest = enable;
    };

    /**
     * setGraphicEnableBlend
     * @param {Bool} enable
     */
    this.setGraphicEnableBlend = function(enable) {
        _enableBlend = enable;
    };

    /**
     * setGraphicBlendEquation
     * @param {Constants.BLENDING_EQUATION_TYPES} equation
     */
    this.setGraphicBlendEquation = function(equation) {
        _blendEquation = equation;
    };

    /**
     * setGraphicBlendSrc
     * @param {Constants.BLENDING_MODES} blend
     */
    this.setGraphicBlendSrc = function(blend) {
        _blendSrc = blend;
    };

    /**
     * setGraphicBlendDst
     * @param {Constants.BLENDING_MODES} blend
     */
    this.setGraphicBlendDst = function(blend) {
        _blendDst = blend;
    };

    /**
     * onPreProcessGraphic
     * @param {Int} [graphicNum=0]
     * @param {Callback} fn
     */
    this.onPreProcessGraphic = function(graphicNum, fn) {
        this.gpufG.onPreProcessGraphic(graphicNum, fn);
    };

    /**
     * onPostProcessGraphic
     * @param {Int} [graphicNum=0]
     * @param {Callback} fn
     */
    this.onPostProcessGraphic = function(graphicNum, fn) {
        this.gpufG.onPostProcessGraphic(graphicNum, fn);
    };

    /**
     * tickVfp
     * @param {Node} [activeCamera=undefined]
     * @private
     */
    this.processGraphic = function(activeCamera) {
        var comp_screenEffects = activeCamera.getComponent(Constants.COMPONENT_TYPES.SCREEN_EFFECTS);
        if(comp_screenEffects != undefined) {
            var resolution = activeCamera.getComponent(Constants.COMPONENT_TYPES.PROJECTION).getResolution();
            this.gl.viewport(0, 0, resolution.width, resolution.height);

            if(this.gpufG != null) {
                if(_enableDepthTest == true) {
                    this.gl.enable(this.gl.DEPTH_TEST);
                } else {
                    this.gl.disable(this.gl.DEPTH_TEST);
                    this.gl.clear(this.gl.DEPTH_BUFFER_BIT);
                }

                if(_enableBlend == true)
                    this.gl.enable(this.gl.BLEND);
                else
                    this.gl.disable(this.gl.BLEND);

                this.gl.blendFunc(this.gl[_blendSrc], this.gl[_blendDst]);
                this.gl.blendEquation(this.gl[_blendEquation]);

                this.gpufG.processGraphic(undefined, _drawMode);
            }
        } else console.log("ComponentScreenEffects not exists in camera");
    };

    /**
     * enableVfp
     * @param {Int} graphicNum
     */
    this.enableGraphic = function(graphicNum) {
        this.gpufG.enableGraphic(graphicNum);
    };

    /**
     * disableVfp
     * @param {Int} graphicNum
     */
    this.disableGraphic = function(graphicNum) {
        this.gpufG.disableGraphic(graphicNum);
    };



    // █████╗ ██████╗  ██████╗ ██╗   ██╗███╗   ███╗███████╗███╗   ██╗████████╗███████╗
    //██╔══██╗██╔══██╗██╔════╝ ██║   ██║████╗ ████║██╔════╝████╗  ██║╚══██╔══╝██╔════╝
    //███████║██████╔╝██║  ███╗██║   ██║██╔████╔██║█████╗  ██╔██╗ ██║   ██║   ███████╗
    //██╔══██║██╔══██╗██║   ██║██║   ██║██║╚██╔╝██║██╔══╝  ██║╚██╗██║   ██║   ╚════██║
    //██║  ██║██║  ██║╚██████╔╝╚██████╔╝██║ ╚═╝ ██║███████╗██║ ╚████║   ██║   ███████║
    //╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝  ╚═════╝ ╚═╝     ╚═╝╚══════╝╚═╝  ╚═══╝   ╚═╝   ╚══════╝

    /**
     * @param {String} argument Argument to set
     * @param {Function} fnvalue
     * @param {Array&lt;Float>} [splits=[array.length]]
     * @param {Array&lt;Float2>} [overrideDimensions=new Array(){Math.sqrt(value.length), Math.sqrt(value.length)}]
     * @returns {WebCLGLBuffer}
     */
    this.setArg = function(argument, fnvalue, splits, overrideDimensions) {
        var buff = this.gpufG.setArg(argument, fnvalue(), splits, overrideDimensions);
        this.args[argument] = {	"fnvalue": fnvalue,
            "updatable": null,
            "splits": splits,
            "overrideDimensions": overrideDimensions};

        return buff;
    };

    /**
     * setSharedArg
     * @param {String} argument Argument to set
     * @param {ComponentRenderer} comp_renderer
     */
    this.setSharedArg = function(argument, comp_renderer) {
        this.gpufG.setSharedArg(argument, comp_renderer.gpufG);
        this.args[argument] = {	"fnvalue": null,
            "updatable": null,
            "splits": null,
            "overrideDimensions": null};
    };

    /**
     * getArgs
     * @returns {Object}
     */
    this.getArgs = function() {
        return this.args;
    };

    /**
     * getAllArgs
     * @returns {Object}
     */
    this.getAllArgs = function() {
        return this.gpufG.getAllArgs();
    };

    /**
     * getBuffers
     * @returns {Array&lt;WebCLGLBuffer>}
     */
    this.getBuffers = function() {
        return this.gpufG.getWork().buffers;
    };

    /**
     * getTempBuffers
     * @returns {Array&lt;WebCLGLBuffer>}
     */
    this.getTempBuffers = function() {
        return this.gpufG.getWork().buffers_TEMP;
    };

    /**
     * clearArg
     * @param {String} argName
     * @param {Array&lt;Float>} clearColor
     */
    this.clearArg = function(argName, clearColor) {
        this.gpufG.fillPointerArg(argName, clearColor);
    };

    /**
     * @param {String} argument Argument to set
     * @param {Bool} value
     */
    this.setArgUpdatable = function(argument, value) {
        this.args[argument].updatable = value;
    };

    /**
     * tickArguments
     * @private
     */
    this.tickArguments = function() {
        for(var key in this.args) {
            if(this.args[key].updatable == true) {
                var arg = this.args[key];
                this.gpufG.setArg(key, arg.fnvalue(), arg.splits, arg.overrideDimensions);
            }
        }
    };

};</pre>
        </article>
    </section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					SCEJS API DOC
					<br />
					
					
		<span class="copyright">
		2015 Roberto Gonzalez. http://stormcolour.appspot.com
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha2</a>
		on Wed May 25 2016 17:23:34 GMT+0200 (CEST) using the <a href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<script src="scripts/sunlight.js"></script>
	<script src="scripts/sunlight.javascript.js"></script>
	<script src="scripts/sunlight-plugin.doclinks.js"></script>
	<script src="scripts/sunlight-plugin.linenumbers.js"></script>
	<script src="scripts/sunlight-plugin.menu.js"></script>
	<script src="scripts/jquery.min.js"></script>
	<script src="scripts/jquery.scrollTo.js"></script>
	<script src="scripts/jquery.localScroll.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>


	<script>  Sunlight.highlightAll({lineNumbers:true,  showMenu: true, enableDoclinks :true}); </script>

	<script>
		$( function () {
			$( "#toc" ).toc( {
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : 60
			} );
			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );

		} );
	</script>

	
	<script>
		$( function () {
			$('#main').localScroll({
				offset: { top: 56 } //offset by the height of your header (give or take a few px, see what works for you)
			});
			$( "dt h4.name" ).each( function () {
				var $this = $( this );
				var icon = $( "<i/>" ).addClass( "icon-plus-sign" ).addClass( "pull-right" ).addClass( "icon-white" );
				var dt = $this.parents( "dt" );
				var children = dt.next( "dd" );

				$this.append( icon ).css( {cursor : "pointer"} );
				$this.addClass( "member-collapsed" ).addClass( "member" );

				children.hide();
				$this.toggle( function () {
					icon.addClass( "icon-minus-sign" ).removeClass( "icon-plus-sign" ).removeClass( "icon-white" );
					$this.addClass( "member-open" ).removeClass( "member-collapsed" );
					children.slideDown();
				}, function () {
					icon.addClass( "icon-plus-sign" ).removeClass( "icon-minus-sign" ).addClass( "icon-white" );
					$this.addClass( "member-collapsed" ).removeClass( "member-open" );
					children.slideUp();
				} );
			} );
		} );
	</script>
	

</body>
</html>
